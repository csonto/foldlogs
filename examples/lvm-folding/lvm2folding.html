<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link rel="stylesheet" type="text/css" href="../../foldlogs.css"/>
  <link rel="stylesheet" type="text/css" href="lvm2folding.css"/>
  <style type="text/css">
  /* override the defaults here */
  #logfilestat {
    font-family: sans-serif;
    font-size: x-small;
    color: #777;
  }
  </style>
  <script src="../lib/arg-1.3.1.min.js" type="text/javascript"></script>
  <script src="../lib/jquery-2.1.3.min.js" type="text/javascript"></script>
  <!--script src="contrib/jquery-2.1.3.js" type="text/javascript"></script-->
  <!--script src="contrib/line-navigator.min.js" type="text/javascript"></script-->
  <script src="../../foldlogs.js" type="text/javascript"></script>
  <script src="lvm2folding.js" type="text/javascript"></script>
  <!--
  <script src="ranges.js" type="text/javascript"></script>
  -->
</head>
<body onload="javascript:unfolding_jump();">
  <div id="logfile">
    <a id="origin" href="">original file</a>
    <div id="logfilenav"></div>
    <pre id="logfilepre"></pre>
    <div id="logfilenav2"></div>
    <div id="logfilestat">Loading file...</div>
    <div><pre id="results"></pre></div>
  </div>
  <script type="text/javascript">

var url_args = proc_url(null, {}, "20160114/ndev-lvmetad:shell_lvconvert-raid456.sh.txt");
var args = proc_args(url_args, 38000);

var stat = function(s) { $("#highlightstat").html(s); };

var ts = Date.now();

$("#origin").attr("href", args.f);

var my_load = function(f) {
  return $.get(args.f, function(data) {
    var lines = data.split("\n");
    $("#logfilestat").html('File obtained in '+(Date.now()-ts)+'ms. <div id="highlightstat"/>');

    highlight_tail(lines, 40000, 32000, lvm2context("logfilepre", $("#logfilepre")), stat);
  }, "text");
};

var relative = function(a, b) {
  return a+"/../"+b;
};

$.getJSON("lvm2files2.json", function (d) {
  file2Prefix = d; // JSON.parse(d);
  $.getJSON(relative(args.f, "build.json"), function (d) {
    buildMeta = d;
    my_load();
  }).fail(function (e) {
    console.error(e);
    my_load();
  });
}).fail(function (e) {
  console.error(e);
  my_load();
});

folding_nav("logfilenav", "logfilepre", $("#results"));
folding_nav("logfilenav2", "logfilepre", $("#results"));

if ('onhashchange' in window) {
  window.onhashchange = unfolding_jump;
}

  </script>
</body>
</html>
